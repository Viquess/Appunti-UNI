\usepackage{float}
\usepackage{xcolor}
\usepackage{placeins}
\usepackage{listings}
\usepackage{enumitem}
\usepackage{graphicx}
\usepackage{titlesec}
\usepackage{tabularx}
\usepackage{subcaption}
\usepackage[T1]{fontenc}
\usepackage[none]{hyphenat}
\usepackage[most]{tcolorbox}
\usepackage[italian]{babel}
\usepackage[a4paper, margin=75pt]{geometry}
\usepackage[colorlinks=true, linkcolor=black]{hyperref}

\sloppy
\graphicspath{{images/}}
\setlist{itemsep=2pt}
\definecolor{definition}{RGB}{180,230,180}
\definecolor{code_strings}{RGB}{180,30,60}
\definecolor{code_numbers}{RGB}{0,80,160}
\definecolor{code_comments}{RGB}{136,136,136}
\definecolor{code_keywords}{RGB}{128,0,128}
\definecolor{code_brackets}{RGB}{204,102,0}
\definecolor{code_extra}{RGB}{180,80,160}

\tcbset{
  statement/.style={
    colback=white,
    coltitle=black,
    fonttitle=\bfseries
  }
}

\newcounter{definition}[section]
\renewcommand{\thedefinition}{\thesection.\arabic{definition}}
\newtcolorbox{definition}[1][]{
  statement,
  colframe=definition,
  boxed title style={colback=definition},
  before title={\refstepcounter{definition}},
  title={Definizione \thedefinition: #1}
}

\lstset{
  language=Python,
  backgroundcolor=\color[HTML]{F2F2F2},
  commentstyle=\color{code_comments},
  keywordstyle=\color{code_keywords},
  numberstyle=\tiny\color[RGB]{128,128,128},
  stringstyle=\color{code_strings},
  basicstyle=\ttfamily\footnotesize,
  upquote=true,
  breakatwhitespace=false,
  breaklines=true,
  captionpos=b,
  keepspaces=true,
  numbers=left,
  numbersep=5pt,
  showspaces=false,
  showstringspaces=false,
  showtabs=false,
  tabsize=2,
  frame=lines,
  rulecolor=\color[HTML]{F2F2F2}
}

\lstdefinelanguage{HTTP}{
  sensitive=true,
  morecomment=[l]{\#},
  morestring=[b]",
  morekeywords={GET, POST, PUT, DELETE, HEAD, OPTIONS, PATCH, TRACE, CONNECT},
  columns=fullflexible,
  alsoletter={:},
  moredelim=[is][\color{code_extra}\bfseries]{~}{~},
  literate=
    *{HTTP/1.0}{{{\color{code_keywords}HTTP/1.0}}}1
     {HTTP/1.1}{{{\color{code_keywords}HTTP/1.1}}}1
     {HTTP/2}{{{\color{code_keywords}HTTP/2}}}1
     {HTTP/3}{{{\color{code_keywords}HTTP/3}}}1
}

\lstdefinelanguage{JSON}{
    keywords={true,false,null},
    morestring=[b]",
    literate=
     *{0}{{{\color{code_numbers}0}}}{1}
      {1}{{{\color{code_numbers}1}}}{1}
      {2}{{{\color{code_numbers}2}}}{1}
      {3}{{{\color{code_numbers}3}}}{1}
      {4}{{{\color{code_numbers}4}}}{1}
      {5}{{{\color{code_numbers}5}}}{1}
      {6}{{{\color{code_numbers}6}}}{1}
      {7}{{{\color{code_numbers}7}}}{1}
      {8}{{{\color{code_numbers}8}}}{1}
      {9}{{{\color{code_numbers}9}}}{1}
      {\{}{{{\color{code_brackets}{\{}}}}{1}
      {\}}{{{\color{code_brackets}{\}}}}}{1}
      {[}{{{\color{code_brackets}{[}}}}{1}
      {]}{{{\color{code_brackets}{]}}}}{1},
}

\lstdefinelanguage{YAML}{
    keywords={true,false,null},
    morestring=[b]",
    morecomment=[l]{\#},
    moredelim=[is][\color{strings}]{~}{~},
    literate=
     *{0}{{{\color{code_numbers}0}}}{1}
      {1}{{{\color{code_numbers}1}}}{1}
      {2}{{{\color{code_numbers}2}}}{1}
      {3}{{{\color{code_numbers}3}}}{1}
      {4}{{{\color{code_numbers}4}}}{1}
      {5}{{{\color{code_numbers}5}}}{1}
      {6}{{{\color{code_numbers}6}}}{1}
      {7}{{{\color{code_numbers}7}}}{1}
      {8}{{{\color{code_numbers}8}}}{1}
      {9}{{{\color{code_numbers}9}}}{1}
      {\{}{{{\color{code_brackets}{\{}}}}{1}
      {\}}{{{\color{code_brackets}{\}}}}}{1}
      {[}{{{\color{code_brackets}{[}}}}{1}
      {]}{{{\color{code_brackets}{]}}}}{1},
}

\lstnewenvironment{code}[1][]
  {\lstset{#1}}
  {}

\titleformat{\section}
  [block]
  {\raggedleft\LARGE\bfseries}
  {\textcolor{gray}{\scalebox{5}{\thesection}}}
  {0pt}
  {\\[3pt]}

\titlespacing*{\section}
  {0pt}   % rientro sinistro
  {0pt}   % spazio prima della sezione
  {30pt}  % spazio dopo la sezione
